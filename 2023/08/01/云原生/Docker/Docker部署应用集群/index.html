<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="一、Docker部署应用1.1 使用Docker部署应用必要性 有利于快速实现应用部署 有利于快速实现应用恢复  1.2 使用Docker部署应用参考资料 二、使用Docker容器实现Nginx部署2.1 获取参考资料   2.2 运行Nginx应用容器 不在docker host暴露端口  12# docker run -d --name nginx-server -v &#x2F;opt&#x2F;nginx-s">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker部署应用集群">
<meta property="og:url" content="https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/index.html">
<meta property="og:site_name" content="祥祥要起飞">
<meta property="og:description" content="一、Docker部署应用1.1 使用Docker部署应用必要性 有利于快速实现应用部署 有利于快速实现应用恢复  1.2 使用Docker部署应用参考资料 二、使用Docker容器实现Nginx部署2.1 获取参考资料   2.2 运行Nginx应用容器 不在docker host暴露端口  12# docker run -d --name nginx-server -v &#x2F;opt&#x2F;nginx-s">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211145757283.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211145839441.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211145905117.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211145956450.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211151131609.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211154602595.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211154639682.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211154747062.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211160925125.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211162127222.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211162728055.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211162817731.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211162911952.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212111348491.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212111511130.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212115409934.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212115556498.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212115858640.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212115929175.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212120017387.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212120525692.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212120808803.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212120839513.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212120910215.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212120952721.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212211742909.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212211840530.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212211857732.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212211950202.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212212223735.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212212245791.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212212305429.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212212341841.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212224446838.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212224524598.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212225251173.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212225313006.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212225336437.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212225412367.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213123228483.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213123307806.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213123355531.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213123503083.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213124157710.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213124232819.png">
<meta property="og:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213124302137.png">
<meta property="article:published_time" content="2023-08-01T00:48:22.000Z">
<meta property="article:modified_time" content="2025-04-24T14:33:15.771Z">
<meta property="article:author" content="祥祥要起飞">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fate-re-zero.github.io/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211145757283.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Docker部署应用集群</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
      <link rel="alternate" href="/atom.xml" title="祥祥要起飞" type="application/atom+xml" />
    
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2023/08/03/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Dockerfile%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA%E6%8A%80%E6%9C%AF/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2023/07/29/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&text=Docker部署应用集群"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&title=Docker部署应用集群"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&is_video=false&description=Docker部署应用集群"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Docker部署应用集群&body=Check out this article: https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&title=Docker部署应用集群"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&title=Docker部署应用集群"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&title=Docker部署应用集群"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&title=Docker部署应用集群"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&name=Docker部署应用集群&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">一、Docker部署应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E5%BF%85%E8%A6%81%E6%80%A7"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 使用Docker部署应用必要性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 使用Docker部署应用参考资料</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0Nginx%E9%83%A8%E7%BD%B2"><span class="toc-number">2.</span> <span class="toc-text">二、使用Docker容器实现Nginx部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E8%8E%B7%E5%8F%96%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 获取参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E8%BF%90%E8%A1%8CNginx%E5%BA%94%E7%94%A8%E5%AE%B9%E5%99%A8"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 运行Nginx应用容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E8%BF%90%E8%A1%8CNginx%E5%BA%94%E7%94%A8%E5%AE%B9%E5%99%A8"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 运行Nginx应用容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E8%BF%90%E8%A1%8CNginx%E5%BA%94%E7%94%A8%E5%AE%B9%E5%99%A8"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 运行Nginx应用容器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0Tomcat%E9%83%A8%E7%BD%B2"><span class="toc-number">3.</span> <span class="toc-text">三、使用Docker容器实现Tomcat部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E8%8E%B7%E5%8F%96%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 获取参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E8%BF%90%E8%A1%8Ctomcat%E5%BA%94%E7%94%A8%E5%AE%B9%E5%99%A8"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 运行tomcat应用容器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-%E4%B8%8D%E6%9A%B4%E9%9C%B2%E7%AB%AF%E5%8F%A3%E8%BF%90%E8%A1%8C"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1 不暴露端口运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-%E6%9A%B4%E9%9C%B2%E7%AB%AF%E5%8F%A3%E8%BF%90%E8%A1%8C"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2 暴露端口运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-%E6%9A%B4%E9%9C%B2%E7%AB%AF%E5%8F%A3%E5%8F%8A%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%AB%99%E6%96%87%E4%BB%B6"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3 暴露端口及添加网站文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0MySQL%E9%83%A8%E7%BD%B2"><span class="toc-number">4.</span> <span class="toc-text">四、使用Docker容器实现MySQL部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E5%8D%95%E8%8A%82%E7%82%B9MySQL%E9%83%A8%E7%BD%B2"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 单节点MySQL部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-MySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 MySQL主从复制集群部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-MySQL%E4%B8%BB%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.2.1 MySQL主节点部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-MySQL%E4%B8%BB%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.2.</span> <span class="toc-text">4.2.2 MySQL主节点配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-MySQL%E4%BB%8E%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2"><span class="toc-number">4.2.3.</span> <span class="toc-text">4.2.3 MySQL从节点部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4-MySQL%E4%BB%8E%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.4.</span> <span class="toc-text">4.2.4 MySQL从节点配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-5-master%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.5.</span> <span class="toc-text">4.2.5 master节点配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-6-slave%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.6.</span> <span class="toc-text">4.2.6 slave节点配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-7-%E9%AA%8C%E8%AF%81MySQL%E9%9B%86%E7%BE%A4%E5%8F%AF%E7%94%A8%E6%80%A7"><span class="toc-number">4.2.7.</span> <span class="toc-text">4.2.7 验证MySQL集群可用性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0Oracle%E9%83%A8%E7%BD%B2"><span class="toc-number">5.</span> <span class="toc-text">五、使用Docker容器实现Oracle部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E8%8E%B7%E5%8F%96%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 获取参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E8%BF%90%E8%A1%8Coracle%E5%AE%B9%E5%99%A8"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 运行oracle容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E4%B8%8B%E8%BD%BD%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5%E5%B7%A5%E5%85%B7"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 下载客户端连接工具</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0ElasticSearch-Kibana%E9%83%A8%E7%BD%B2"><span class="toc-number">6.</span> <span class="toc-text">六、使用Docker容器实现ElasticSearch+Kibana部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E8%8E%B7%E5%8F%96%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 获取参考资料</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-ES%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">6.1.1.</span> <span class="toc-text">6.1.1 ES部署参考资料</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2-Kibana%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">6.1.2.</span> <span class="toc-text">6.1.2 Kibana部署参考资料</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-ES%E9%83%A8%E7%BD%B2"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 ES部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-Kibana%E9%83%A8%E7%BD%B2"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 Kibana部署</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0Redis%E9%83%A8%E7%BD%B2"><span class="toc-number">7.</span> <span class="toc-text">七、使用Docker容器实现Redis部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E8%8E%B7%E5%8F%96%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 获取参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E8%BF%90%E8%A1%8CRedis%E5%AE%B9%E5%99%A8"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 运行Redis容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E9%AA%8C%E8%AF%81"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 验证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-Redis%E9%9B%86%E7%BE%A4"><span class="toc-number">7.4.</span> <span class="toc-text">7.4 Redis集群</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0RabbitMQ%E9%83%A8%E7%BD%B2"><span class="toc-number">8.</span> <span class="toc-text">八、使用Docker容器实现RabbitMQ部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E8%8E%B7%E5%8F%96%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 获取参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E9%83%A8%E7%BD%B2RabbitMQ"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 部署RabbitMQ</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Docker部署应用集群
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">祥祥要起飞</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-08-01T00:48:22.000Z" itemprop="datePublished">2023-08-01</time>
        
      
    </div>


      <div class="posteye">
    <i class="fas fa-eye"></i>
    <span id="/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/" class="leancloud-visitors" data-flag-title="Docker部署应用集群" style="display: inline;">
        <span class="leancloud-visitors-count"></span>
    </span>
</div>
      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/Docker/" rel="tag">Docker</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="一、Docker部署应用"><a href="#一、Docker部署应用" class="headerlink" title="一、Docker部署应用"></a>一、Docker部署应用</h1><h2 id="1-1-使用Docker部署应用必要性"><a href="#1-1-使用Docker部署应用必要性" class="headerlink" title="1.1 使用Docker部署应用必要性"></a>1.1 使用Docker部署应用必要性</h2><ul>
<li>有利于快速实现应用部署</li>
<li>有利于快速实现应用恢复</li>
</ul>
<h2 id="1-2-使用Docker部署应用参考资料"><a href="#1-2-使用Docker部署应用参考资料" class="headerlink" title="1.2 使用Docker部署应用参考资料"></a>1.2 使用Docker部署应用参考资料</h2><p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211145757283.png" alt="image-20220211145757283"></p>
<h1 id="二、使用Docker容器实现Nginx部署"><a href="#二、使用Docker容器实现Nginx部署" class="headerlink" title="二、使用Docker容器实现Nginx部署"></a>二、使用Docker容器实现Nginx部署</h1><h2 id="2-1-获取参考资料"><a href="#2-1-获取参考资料" class="headerlink" title="2.1 获取参考资料"></a>2.1 获取参考资料</h2><p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211145839441.png" alt="image-20220211145839441"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211145905117.png" alt="image-20220211145905117"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211145956450.png" alt="image-20220211145956450"></p>
<h2 id="2-2-运行Nginx应用容器"><a href="#2-2-运行Nginx应用容器" class="headerlink" title="2.2 运行Nginx应用容器"></a>2.2 运行Nginx应用容器</h2><blockquote>
<p>不在docker host暴露端口</p>
</blockquote>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -d --name nginx-server -v /opt/nginx-server:/usr/share/nginx/html:ro nginx</span></span><br><span class="line"><span class="number">664</span>cd1bbda4ad2a71cbd09f0c6baa9b34db80db2d69496670a960be07b9521cb</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE       COMMAND                  CREATED          STATUS          PORTS                                                  NAMES</span><br><span class="line"><span class="number">664</span>cd1bbda4a   nginx       <span class="string">&quot;/docker-entrypoint.…&quot;</span>   <span class="number">4</span> seconds ago    Up <span class="number">3</span> seconds    <span class="number">80</span>/tcp                                                 nginx<span class="literal">-server</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker inspect 664 | grep IPAddress</span></span><br><span class="line">            <span class="string">&quot;SecondaryIPAddresses&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;IPAddress&quot;</span>: <span class="string">&quot;172.17.0.3&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;IPAddress&quot;</span>: <span class="string">&quot;172.17.0.3&quot;</span>,</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl http://172.17.0.3</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;<span class="number">403</span> Forbidden&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;&lt;h1&gt;<span class="number">403</span> Forbidden&lt;/h1&gt;&lt;/center&gt;</span><br><span class="line">&lt;hr&gt;&lt;center&gt;nginx/<span class="number">1.21</span>.<span class="number">6</span>&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>





<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ls /opt</span></span><br><span class="line">nginx<span class="literal">-server</span></span><br><span class="line"><span class="comment"># echo &quot;nginx is working&quot; &gt; /opt/nginx-server/index.html</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl http://172.17.0.3</span></span><br><span class="line">nginx is working</span><br></pre></td></tr></table></figure>



<h2 id="2-3-运行Nginx应用容器"><a href="#2-3-运行Nginx应用容器" class="headerlink" title="2.3 运行Nginx应用容器"></a>2.3 运行Nginx应用容器</h2><blockquote>
<p>在docker host暴露80端口</p>
</blockquote>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -d -p 80:80 --name nginx-server-port -v /opt/nginx-server-port:/usr/share/nginx/html:ro nginx</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE       COMMAND                  CREATED             STATUS             PORTS                                                  NAMES</span><br><span class="line"><span class="number">74</span>dddf51983d   nginx       <span class="string">&quot;/docker-entrypoint.…&quot;</span>   <span class="number">3</span> seconds ago       Up <span class="number">2</span> seconds       <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">80</span>-&gt;<span class="number">80</span>/tcp, :::<span class="number">80</span>-&gt;<span class="number">80</span>/tcp                      nginx<span class="literal">-server</span><span class="literal">-port</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ls /opt</span></span><br><span class="line">nginx<span class="literal">-server</span>  nginx<span class="literal">-server</span><span class="literal">-port</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># echo &quot;nginx is running&quot; &gt; /opt/nginx-server-port/index.html</span></span><br></pre></td></tr></table></figure>



<p><strong>在宿主机上访问</strong></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211151131609.png" alt="image-20220211151131609"></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker top nginx-server-port</span></span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class="line">root                <span class="number">22195</span>               <span class="number">22163</span>               <span class="number">0</span>                   <span class="number">15</span>:<span class="number">08</span>               ?                   <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>            nginx: master <span class="keyword">process</span> nginx <span class="literal">-g</span> daemon off;</span><br><span class="line"><span class="number">101</span>                 <span class="number">22387</span>               <span class="number">22195</span>               <span class="number">0</span>                   <span class="number">15</span>:<span class="number">08</span>               ?                   <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>            nginx: worker <span class="keyword">process</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h2 id="2-4-运行Nginx应用容器"><a href="#2-4-运行Nginx应用容器" class="headerlink" title="2.4 运行Nginx应用容器"></a>2.4 运行Nginx应用容器</h2><blockquote>
<p>挂载配置文件,需要创建一个nginx容器，把配置文件复制出来修改后使用。</p>
</blockquote>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker cp nginxwebcontainername:/etc/nginx/nginx.conf /opt/nginxcon/</span></span><br><span class="line">修改后即可使用</span><br></pre></td></tr></table></figure>





<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ls /opt/nginxcon/nginx.conf</span></span><br><span class="line">/opt/nginxcon/nginx.conf</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -d \</span></span><br><span class="line"><span class="literal">-p</span> <span class="number">82</span>:<span class="number">80</span> -<span class="literal">-name</span> nginx<span class="literal">-server</span><span class="literal">-conf</span> \</span><br><span class="line"><span class="literal">-v</span> /opt/nginx<span class="literal">-server</span><span class="literal">-conf</span>:/usr/share/nginx/html:ro \</span><br><span class="line"><span class="literal">-v</span> /opt/nginxcon/nginx.conf:/etc/nginx/nginx.conf:ro \</span><br><span class="line">nginx</span><br><span class="line"><span class="number">76251</span>ec44e5049445399303944fc96eb8161ccb49e27b673b99cb2492009523c</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker top nginx-server-conf</span></span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class="line">root                <span class="number">25005</span>               <span class="number">24972</span>               <span class="number">0</span>                   <span class="number">15</span>:<span class="number">38</span>               ?                   <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>            nginx: master <span class="keyword">process</span> nginx <span class="literal">-g</span> daemon off;</span><br><span class="line"><span class="number">101</span>                 <span class="number">25178</span>               <span class="number">25005</span>               <span class="number">0</span>                   <span class="number">15</span>:<span class="number">38</span>               ?                   <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>            nginx: worker <span class="keyword">process</span></span><br><span class="line"><span class="number">101</span>                 <span class="number">25179</span>               <span class="number">25005</span>               <span class="number">0</span>                   <span class="number">15</span>:<span class="number">38</span>               ?                   <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>            nginx: worker <span class="keyword">process</span></span><br></pre></td></tr></table></figure>





<h1 id="三、使用Docker容器实现Tomcat部署"><a href="#三、使用Docker容器实现Tomcat部署" class="headerlink" title="三、使用Docker容器实现Tomcat部署"></a>三、使用Docker容器实现Tomcat部署</h1><h2 id="3-1-获取参考资料"><a href="#3-1-获取参考资料" class="headerlink" title="3.1 获取参考资料"></a>3.1 获取参考资料</h2><p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211154602595.png" alt="image-20220211154602595"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211154639682.png" alt="image-20220211154639682"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211154747062.png" alt="image-20220211154747062"></p>
<h2 id="3-2-运行tomcat应用容器"><a href="#3-2-运行tomcat应用容器" class="headerlink" title="3.2 运行tomcat应用容器"></a>3.2 运行tomcat应用容器</h2><h3 id="3-2-1-不暴露端口运行"><a href="#3-2-1-不暴露端口运行" class="headerlink" title="3.2.1 不暴露端口运行"></a>3.2.1 不暴露端口运行</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -d --rm tomcat:9.0</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE        COMMAND                  CREATED             STATUS             PORTS                                                  NAMES</span><br><span class="line">c20a0e781246   tomcat:<span class="number">9.0</span>   <span class="string">&quot;catalina.sh run&quot;</span>        <span class="number">27</span> seconds ago      Up <span class="number">25</span> seconds      <span class="number">8080</span>/tcp                                               heuristic_cori</span><br></pre></td></tr></table></figure>







<h3 id="3-2-2-暴露端口运行"><a href="#3-2-2-暴露端口运行" class="headerlink" title="3.2.2 暴露端口运行"></a>3.2.2 暴露端口运行</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -d -p 8080:8080 --rm tomcat:9.0</span></span><br><span class="line"><span class="number">2</span>fcf5762314373c824928490b871138a01a94abedd7e6814ad5f361d09fbe1de</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE        COMMAND                  CREATED             STATUS             PORTS                                                  NAMES</span><br><span class="line"><span class="number">2</span>fcf57623143   tomcat:<span class="number">9.0</span>   <span class="string">&quot;catalina.sh run&quot;</span>        <span class="number">3</span> seconds ago       Up <span class="number">1</span> second        <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8080</span>-&gt;<span class="number">8080</span>/tcp, :::<span class="number">8080</span>-&gt;<span class="number">8080</span>/tcp              eloquent_chatelet</span><br></pre></td></tr></table></figure>



<p><strong>在宿主机访问</strong></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211160925125.png" alt="image-20220211160925125"></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker exec 2fc ls /usr/local/tomcat/webapps</span></span><br><span class="line">里面为空，所以可以添加网站文件。</span><br></pre></td></tr></table></figure>





<h3 id="3-2-3-暴露端口及添加网站文件"><a href="#3-2-3-暴露端口及添加网站文件" class="headerlink" title="3.2.3 暴露端口及添加网站文件"></a>3.2.3 暴露端口及添加网站文件</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -d -p 8081:8080 -v /opt/tomcat-server:/usr/local/tomcat/webapps/ROOT tomcat:9.0</span></span><br><span class="line">f456e705d48fc603b7243a435f0edd6284558c194e105d87befff2dccddc0b63</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE        COMMAND             CREATED         STATUS         PORTS                                       NAMES</span><br><span class="line">f456e705d48f   tomcat:<span class="number">9.0</span>   <span class="string">&quot;catalina.sh run&quot;</span>   <span class="number">3</span> seconds ago   Up <span class="number">2</span> seconds   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8081</span>-&gt;<span class="number">8080</span>/tcp, :::<span class="number">8081</span>-&gt;<span class="number">8080</span>/tcp   cool_germain</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># echo &quot;tomcat running&quot; &gt; /opt/tomcat-server/index.html</span></span><br></pre></td></tr></table></figure>



<p><strong>在宿主机访问</strong></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211162127222.png" alt="image-20220211162127222"></p>
<h1 id="四、使用Docker容器实现MySQL部署"><a href="#四、使用Docker容器实现MySQL部署" class="headerlink" title="四、使用Docker容器实现MySQL部署"></a>四、使用Docker容器实现MySQL部署</h1><h2 id="4-1-单节点MySQL部署"><a href="#4-1-单节点MySQL部署" class="headerlink" title="4.1 单节点MySQL部署"></a>4.1 单节点MySQL部署</h2><p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211162728055.png" alt="image-20220211162728055"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211162817731.png" alt="image-20220211162817731"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220211162911952.png" alt="image-20220211162911952"></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -p 3306:3306 \</span></span><br><span class="line"> -<span class="literal">-name</span> mysql \</span><br><span class="line"> <span class="literal">-v</span> /opt/mysql/log:/var/log/mysql \</span><br><span class="line"> <span class="literal">-v</span> /opt/mysql/<span class="keyword">data</span>:/var/lib/mysql \</span><br><span class="line"> <span class="literal">-v</span> /opt/mysql/conf:/etc/mysql \</span><br><span class="line"> <span class="literal">-e</span> MYSQL_ROOT_PASSWORD=root \</span><br><span class="line"> <span class="literal">-d</span> \</span><br><span class="line"> mysql:<span class="number">5.7</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE       COMMAND                  CREATED          STATUS          PORTS                                                  NAMES</span><br><span class="line"><span class="number">6</span>d16ca21cf31   mysql:<span class="number">5.7</span>   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   <span class="number">32</span> seconds ago   Up <span class="number">30</span> seconds   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">3306</span>-&gt;<span class="number">3306</span>/tcp, :::<span class="number">3306</span>-&gt;<span class="number">3306</span>/tcp, <span class="number">33060</span>/tcp   mysql</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">通过容器中客户端访问</span><br><span class="line"><span class="comment"># docker exec -it mysql mysql -uroot -proot</span></span><br><span class="line">mysql: [<span class="type">Warning</span>] <span class="keyword">Using</span> a password on the <span class="keyword">command</span> line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands <span class="keyword">end</span> with ; or \g.</span><br><span class="line">Your MySQL connection id is <span class="number">4</span></span><br><span class="line">Server version: <span class="number">5.7</span>.<span class="number">37</span> MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) <span class="number">2000</span>, <span class="number">2022</span>, Oracle and/or its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line"><span class="built_in">Type</span> <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> help. <span class="built_in">Type</span> <span class="string">&#x27;\c&#x27;</span> to <span class="built_in">clear</span> the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">在docker host上访问</span><br><span class="line"><span class="comment"># yum -y install mariadb</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysql -h 192.168.255.157 -uroot -proot -P 3306</span></span><br><span class="line">Welcome to the MariaDB monitor.  Commands <span class="keyword">end</span> with ; or \g.</span><br><span class="line">Your MySQL connection id is <span class="number">7</span></span><br><span class="line">Server version: <span class="number">5.7</span>.<span class="number">37</span> MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) <span class="number">2000</span>, <span class="number">2018</span>, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line"><span class="built_in">Type</span> <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> help. <span class="built_in">Type</span> <span class="string">&#x27;\c&#x27;</span> to <span class="built_in">clear</span> the current input statement.</span><br><span class="line"></span><br><span class="line">MySQL [(<span class="type">none</span>)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line"><span class="number">4</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>







<h2 id="4-2-MySQL主从复制集群部署"><a href="#4-2-MySQL主从复制集群部署" class="headerlink" title="4.2 MySQL主从复制集群部署"></a>4.2 MySQL主从复制集群部署</h2><h3 id="4-2-1-MySQL主节点部署"><a href="#4-2-1-MySQL主节点部署" class="headerlink" title="4.2.1 MySQL主节点部署"></a>4.2.1 MySQL主节点部署</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -p 3306:3306 \</span></span><br><span class="line"> -<span class="literal">-name</span> mysql<span class="literal">-master</span> \</span><br><span class="line"> <span class="literal">-v</span> /opt/mysql<span class="literal">-master</span>/log:/var/log/mysql \</span><br><span class="line"> <span class="literal">-v</span> /opt/mysql<span class="literal">-master</span>/<span class="keyword">data</span>:/var/lib/mysql \</span><br><span class="line"> <span class="literal">-v</span> /opt/mysql<span class="literal">-master</span>/conf:/etc/mysql \</span><br><span class="line"> <span class="literal">-e</span> MYSQL_ROOT_PASSWORD=root \</span><br><span class="line"> <span class="literal">-d</span> mysql:<span class="number">5.7</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE       COMMAND                  CREATED          STATUS          PORTS                                                  NAMES</span><br><span class="line"><span class="number">2</span>dbbed8e35c7   mysql:<span class="number">5.7</span>   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   <span class="number">58</span> seconds ago   Up <span class="number">57</span> seconds   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">3306</span>-&gt;<span class="number">3306</span>/tcp, :::<span class="number">3306</span>-&gt;<span class="number">3306</span>/tcp, <span class="number">33060</span>/tcp   mysql<span class="literal">-master</span></span><br></pre></td></tr></table></figure>





<h3 id="4-2-2-MySQL主节点配置"><a href="#4-2-2-MySQL主节点配置" class="headerlink" title="4.2.2 MySQL主节点配置"></a>4.2.2 MySQL主节点配置</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /opt/mysql-master/conf/my.cnf</span></span><br><span class="line"><span class="comment"># cat /opt/mysql-master/conf/my.cnf</span></span><br><span class="line">[<span class="type">client</span>]</span><br><span class="line">default<span class="literal">-character</span><span class="literal">-set</span>=utf8</span><br><span class="line"></span><br><span class="line">[<span class="type">mysql</span>]</span><br><span class="line">default<span class="literal">-character</span><span class="literal">-set</span>=utf8</span><br><span class="line"></span><br><span class="line">[<span class="type">mysqld</span>]</span><br><span class="line">init_connect=<span class="string">&#x27;SET collation_connection = utf8_unicode_ci&#x27;</span></span><br><span class="line">init_connect=<span class="string">&#x27;SET NAMES utf8&#x27;</span></span><br><span class="line">character<span class="literal">-set</span><span class="literal">-server</span>=utf8</span><br><span class="line">collation<span class="literal">-server</span>=utf8_unicode_ci</span><br><span class="line"><span class="built_in">skip-character</span><span class="literal">-set</span><span class="literal">-client</span><span class="literal">-handshake</span></span><br><span class="line"><span class="built_in">skip-name</span><span class="literal">-resolve</span></span><br><span class="line"></span><br><span class="line">server_id=<span class="number">1</span></span><br><span class="line">log<span class="literal">-bin</span>=mysql<span class="literal">-bin</span></span><br><span class="line"><span class="built_in">read-only</span>=<span class="number">0</span></span><br><span class="line">binlog<span class="literal">-do</span><span class="literal">-db</span>=kubelixiang_test</span><br><span class="line"></span><br><span class="line">replicate<span class="literal">-ignore</span><span class="literal">-db</span>=mysql</span><br><span class="line">replicate<span class="literal">-ignore</span><span class="literal">-db</span>=sys</span><br><span class="line">replicate<span class="literal">-ignore</span><span class="literal">-db</span>=information_schema</span><br><span class="line">replicate<span class="literal">-ignore</span><span class="literal">-db</span>=performance_schema</span><br></pre></td></tr></table></figure>







<h3 id="4-2-3-MySQL从节点部署"><a href="#4-2-3-MySQL从节点部署" class="headerlink" title="4.2.3 MySQL从节点部署"></a>4.2.3 MySQL从节点部署</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -p 3307:3306 \</span></span><br><span class="line"> -<span class="literal">-name</span> mysql<span class="literal">-slave</span> \</span><br><span class="line"> <span class="literal">-v</span> /opt/mysql<span class="literal">-slave</span>/log:/var/log/mysql \</span><br><span class="line"> <span class="literal">-v</span> /opt/mysql<span class="literal">-slave</span>/<span class="keyword">data</span>:/var/lib/mysql \</span><br><span class="line"> <span class="literal">-v</span> /opt/mysql<span class="literal">-slave</span>/conf:/etc/mysql \</span><br><span class="line"> <span class="literal">-e</span> MYSQL_ROOT_PASSWORD=root \</span><br><span class="line"> <span class="literal">-d</span> </span><br><span class="line"> -<span class="literal">-link</span> mysql<span class="literal">-master</span>:mysql<span class="literal">-master</span></span><br><span class="line"> mysql:<span class="number">5.7</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE       COMMAND                  CREATED         STATUS         PORTS                                                  NAMES</span><br><span class="line">caf7bf3fc68f   mysql:<span class="number">5.7</span>   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   <span class="number">8</span> seconds ago   Up <span class="number">6</span> seconds   <span class="number">33060</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">3307</span>-&gt;<span class="number">3306</span>/tcp, :::<span class="number">3307</span>-&gt;<span class="number">3306</span>/tcp   mysql<span class="literal">-slave</span></span><br></pre></td></tr></table></figure>







<h3 id="4-2-4-MySQL从节点配置"><a href="#4-2-4-MySQL从节点配置" class="headerlink" title="4.2.4 MySQL从节点配置"></a>4.2.4 MySQL从节点配置</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /opt/mysql-slave/conf/my.cnf</span></span><br><span class="line"><span class="comment"># cat /opt/mysql-slave/conf/my.cnf</span></span><br><span class="line">[<span class="type">client</span>]</span><br><span class="line">default<span class="literal">-character</span><span class="literal">-set</span>=utf8</span><br><span class="line"></span><br><span class="line">[<span class="type">mysql</span>]</span><br><span class="line">default<span class="literal">-character</span><span class="literal">-set</span>=utf8</span><br><span class="line"></span><br><span class="line">[<span class="type">mysqld</span>]</span><br><span class="line">init_connect=<span class="string">&#x27;SET collation_connection = utf8_unicode_ci&#x27;</span></span><br><span class="line">init_connect=<span class="string">&#x27;SET NAMES utf8&#x27;</span></span><br><span class="line">character<span class="literal">-set</span><span class="literal">-server</span>=utf8</span><br><span class="line">collation<span class="literal">-server</span>=utf8_unicode_ci</span><br><span class="line"><span class="built_in">skip-character</span><span class="literal">-set</span><span class="literal">-client</span><span class="literal">-handshake</span></span><br><span class="line"><span class="built_in">skip-name</span><span class="literal">-resolve</span></span><br><span class="line"></span><br><span class="line">server_id=<span class="number">2</span></span><br><span class="line">log<span class="literal">-bin</span>=mysql<span class="literal">-bin</span></span><br><span class="line"><span class="built_in">read-only</span>=<span class="number">1</span></span><br><span class="line">binlog<span class="literal">-do</span><span class="literal">-db</span>=kubelixiang_test</span><br><span class="line"></span><br><span class="line">replicate<span class="literal">-ignore</span><span class="literal">-db</span>=mysql</span><br><span class="line">replicate<span class="literal">-ignore</span><span class="literal">-db</span>=sys</span><br><span class="line">replicate<span class="literal">-ignore</span><span class="literal">-db</span>=information_schema</span><br><span class="line">replicate<span class="literal">-ignore</span><span class="literal">-db</span>=performance_schema</span><br></pre></td></tr></table></figure>



<h3 id="4-2-5-master节点配置"><a href="#4-2-5-master节点配置" class="headerlink" title="4.2.5 master节点配置"></a>4.2.5 master节点配置</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysql -h 192.168.255.157 -uroot -proot -P 3306</span></span><br><span class="line">Welcome to the MariaDB monitor.  Commands <span class="keyword">end</span> with ; or \g.</span><br><span class="line">Your MySQL connection id is <span class="number">2</span></span><br><span class="line">Server version: <span class="number">5.7</span>.<span class="number">37</span> MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) <span class="number">2000</span>, <span class="number">2018</span>, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line"><span class="built_in">Type</span> <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> help. <span class="built_in">Type</span> <span class="string">&#x27;\c&#x27;</span> to <span class="built_in">clear</span> the current input statement.</span><br><span class="line"></span><br><span class="line">MySQL [(<span class="type">none</span>)]&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">授权</span><br><span class="line">MySQL [(<span class="type">none</span>)]&gt; grant replication slave on *.* to <span class="string">&#x27;backup&#x27;</span><span class="string">@&#x27;%&#x27; identified by &#x27;123456&#x27;;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">重启容器，使用配置生效</span><br><span class="line"><span class="comment"># docker restart mysql-master</span></span><br></pre></td></tr></table></figure>





<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">查看状态</span><br><span class="line">MySQL [(<span class="type">none</span>)]&gt; show master status\G</span><br><span class="line">*************************** <span class="number">1</span>. row ***************************</span><br><span class="line">             File: mysql<span class="literal">-bin</span>.<span class="number">000001</span></span><br><span class="line">         Position: <span class="number">154</span></span><br><span class="line">     Binlog_Do_DB: kubelixiang_test</span><br><span class="line"> Binlog_Ignore_DB:</span><br><span class="line">Executed_Gtid_Set:</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>





<h3 id="4-2-6-slave节点配置"><a href="#4-2-6-slave节点配置" class="headerlink" title="4.2.6 slave节点配置"></a>4.2.6 slave节点配置</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker restart mysql-slave</span></span><br></pre></td></tr></table></figure>





<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysql -h 192.168.255.157 -uroot -proot -P 3307</span></span><br><span class="line">Welcome to the MariaDB monitor.  Commands <span class="keyword">end</span> with ; or \g.</span><br><span class="line">Your MySQL connection id is <span class="number">2</span></span><br><span class="line">Server version: <span class="number">5.7</span>.<span class="number">37</span> MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) <span class="number">2000</span>, <span class="number">2018</span>, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line"><span class="built_in">Type</span> <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> help. <span class="built_in">Type</span> <span class="string">&#x27;\c&#x27;</span> to <span class="built_in">clear</span> the current input statement.</span><br><span class="line"></span><br><span class="line">MySQL [(<span class="type">none</span>)]&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(<span class="type">none</span>)]&gt; change master to master_host=<span class="string">&#x27;mysql-master&#x27;</span>, master_user=<span class="string">&#x27;backup&#x27;</span>, master_password=<span class="string">&#x27;123456&#x27;</span>, master_log_file=<span class="string">&#x27;mysql-bin.000001&#x27;</span>, master_log_pos=<span class="number">154</span>, master_port=<span class="number">3306</span>;</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(<span class="type">none</span>)]&gt; <span class="built_in">start</span> slave;</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(<span class="type">none</span>)]&gt; show slave status\G</span><br><span class="line">*************************** <span class="number">1</span>. row ***************************</span><br><span class="line">               Slave_IO_State: Waiting <span class="keyword">for</span> master to send event</span><br><span class="line">                  Master_Host: mysql<span class="literal">-master</span></span><br><span class="line">                  Master_User: backup</span><br><span class="line">                  Master_Port: <span class="number">3306</span></span><br><span class="line">                Connect_Retry: <span class="number">60</span></span><br><span class="line">              Master_Log_File: mysql<span class="literal">-bin</span>.<span class="number">000001</span></span><br><span class="line">          Read_Master_Log_Pos: <span class="number">154</span></span><br><span class="line">               Relay_Log_File: e0872f94c377<span class="literal">-relay</span><span class="literal">-bin</span>.<span class="number">000002</span></span><br><span class="line">                Relay_Log_Pos: <span class="number">320</span></span><br><span class="line">        Relay_Master_Log_File: mysql<span class="literal">-bin</span>.<span class="number">000001</span></span><br><span class="line">             Slave_IO_Running: Yes</span><br><span class="line">            Slave_SQL_Running: Yes</span><br><span class="line">              Replicate_Do_DB:</span><br><span class="line">          Replicate_Ignore_DB: mysql,sys,information_schema,performance_schema</span><br><span class="line">           Replicate_Do_Table:</span><br><span class="line">       Replicate_Ignore_Table:</span><br><span class="line">      Replicate_Wild_Do_Table:</span><br><span class="line">  Replicate_Wild_Ignore_Table:</span><br><span class="line">                   Last_Errno: <span class="number">0</span></span><br><span class="line">                   Last_Error:</span><br><span class="line">                 Skip_Counter: <span class="number">0</span></span><br><span class="line">          Exec_Master_Log_Pos: <span class="number">154</span></span><br><span class="line">              Relay_Log_Space: <span class="number">534</span></span><br><span class="line">              Until_Condition: None</span><br><span class="line">               Until_Log_File:</span><br><span class="line">                Until_Log_Pos: <span class="number">0</span></span><br><span class="line">           Master_SSL_Allowed: No</span><br><span class="line">           Master_SSL_CA_File:</span><br><span class="line">           Master_SSL_CA_Path:</span><br><span class="line">              Master_SSL_Cert:</span><br><span class="line">            Master_SSL_Cipher:</span><br><span class="line">               Master_SSL_Key:</span><br><span class="line">        Seconds_Behind_Master: <span class="number">0</span></span><br><span class="line">Master_SSL_Verify_Server_Cert: No</span><br><span class="line">                Last_IO_Errno: <span class="number">0</span></span><br><span class="line">                Last_IO_Error:</span><br><span class="line">               Last_SQL_Errno: <span class="number">0</span></span><br><span class="line">               Last_SQL_Error:</span><br><span class="line">  Replicate_Ignore_Server_Ids:</span><br><span class="line">             Master_Server_Id: <span class="number">1</span></span><br><span class="line">                  Master_UUID: <span class="number">0130</span>b415<span class="literal">-8b21</span><span class="literal">-11ec</span><span class="literal">-8982</span><span class="literal">-0242ac110002</span></span><br><span class="line">             Master_Info_File: /var/lib/mysql/master.info</span><br><span class="line">                    SQL_Delay: <span class="number">0</span></span><br><span class="line">          SQL_Remaining_Delay: NULL</span><br><span class="line">      Slave_SQL_Running_State: Slave has read all relay log; waiting <span class="keyword">for</span> more updates</span><br><span class="line">           Master_Retry_Count: <span class="number">86400</span></span><br><span class="line">                  Master_Bind:</span><br><span class="line">      Last_IO_Error_Timestamp:</span><br><span class="line">     Last_SQL_Error_Timestamp:</span><br><span class="line">               Master_SSL_Crl:</span><br><span class="line">           Master_SSL_Crlpath:</span><br><span class="line">           Retrieved_Gtid_Set:</span><br><span class="line">            Executed_Gtid_Set:</span><br><span class="line">                Auto_Position: <span class="number">0</span></span><br><span class="line">         Replicate_Rewrite_DB:</span><br><span class="line">                 Channel_Name:</span><br><span class="line">           Master_TLS_Version:</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<h3 id="4-2-7-验证MySQL集群可用性"><a href="#4-2-7-验证MySQL集群可用性" class="headerlink" title="4.2.7 验证MySQL集群可用性"></a>4.2.7 验证MySQL集群可用性</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">在MySQL Master节点添加kubelixiang_test数据库</span><br><span class="line"><span class="comment"># mysql -h 192.168.255.157 -uroot -proot -P3306</span></span><br><span class="line"></span><br><span class="line">MySQL [(<span class="type">none</span>)]&gt; create database kubelixiang_test;</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">MySQL [(<span class="type">none</span>)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| kubelixiang_test       |     |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line"><span class="number">6</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">在MySQL Slave节点查看同步情况</span><br><span class="line"><span class="comment"># mysql -h 192.168.255.157 -uroot -proot -P3307</span></span><br><span class="line"></span><br><span class="line">MySQL [(<span class="type">none</span>)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| kubelixiang_test       |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line"><span class="number">5</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>









<h1 id="五、使用Docker容器实现Oracle部署"><a href="#五、使用Docker容器实现Oracle部署" class="headerlink" title="五、使用Docker容器实现Oracle部署"></a>五、使用Docker容器实现Oracle部署</h1><h2 id="5-1-获取参考资料"><a href="#5-1-获取参考资料" class="headerlink" title="5.1 获取参考资料"></a>5.1 获取参考资料</h2><p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212111348491.png" alt="image-20220212111348491"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212111511130.png" alt="image-20220212111511130"></p>
<h2 id="5-2-运行oracle容器"><a href="#5-2-运行oracle容器" class="headerlink" title="5.2 运行oracle容器"></a>5.2 运行oracle容器</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker pull oracleinanutshell/oracle-xe-11g</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -h oracle --name oracle -d -p 49160:22 -p 49161:1521 -p 49162:8080 oracleinanutshell/oracle-xe-11g</span></span><br><span class="line"><span class="number">237</span>db949020abf2cee12e3193fa8a34d9dfadaafd9d5604564668d4472abe0b2</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE                             COMMAND                  CREATED         STATUS         PORTS                                                                                                                               NAMES</span><br><span class="line"><span class="number">237</span>db949020a   oracleinanutshell/oracle<span class="literal">-xe</span><span class="literal">-11g</span>   <span class="string">&quot;/bin/sh -c &#x27;/usr/sb…&quot;</span>   <span class="number">7</span> seconds ago   Up <span class="number">4</span> seconds   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">49160</span>-&gt;<span class="number">22</span>/tcp, :::<span class="number">49160</span>-&gt;<span class="number">22</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">49161</span>-&gt;<span class="number">1521</span>/tcp, :::<span class="number">49161</span>-&gt;<span class="number">1521</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">49162</span>-&gt;<span class="number">8080</span>/tcp, :::<span class="number">49162</span>-&gt;<span class="number">8080</span>/tcp   oracle</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">说明：</span><br><span class="line"><span class="number">49160</span> 为ssh端口</span><br><span class="line"><span class="number">49161</span> 为sqlplus端口</span><br><span class="line"><span class="number">49162</span> 为oem端口</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">oracle数据库连接信息</span><br><span class="line">port:<span class="number">49161</span></span><br><span class="line">sid:xe</span><br><span class="line">username:system</span><br><span class="line">password:oracle</span><br><span class="line"></span><br><span class="line">SYS用户密码为:oracle</span><br></pre></td></tr></table></figure>



<h2 id="5-3-下载客户端连接工具"><a href="#5-3-下载客户端连接工具" class="headerlink" title="5.3 下载客户端连接工具"></a>5.3 下载客户端连接工具</h2><p>下载链接地址：<a target="_blank" rel="noopener" href="https://www.oracle.com/tools/downloads/sqldev-downloads.html">https://www.oracle.com/tools/downloads/sqldev-downloads.html</a></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212115409934.png" alt="image-20220212115409934"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212115556498.png" alt="image-20220212115556498"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212115858640.png" alt="image-20220212115858640"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212115929175.png" alt="image-20220212115929175"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212120017387.png" alt="image-20220212120017387"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212120525692.png" alt="image-20220212120525692"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212120808803.png" alt="image-20220212120808803"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212120839513.png" alt="image-20220212120839513"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212120910215.png" alt="image-20220212120910215"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212120952721.png" alt="image-20220212120952721"></p>
<h1 id="六、使用Docker容器实现ElasticSearch-Kibana部署"><a href="#六、使用Docker容器实现ElasticSearch-Kibana部署" class="headerlink" title="六、使用Docker容器实现ElasticSearch+Kibana部署"></a>六、使用Docker容器实现ElasticSearch+Kibana部署</h1><h2 id="6-1-获取参考资料"><a href="#6-1-获取参考资料" class="headerlink" title="6.1 获取参考资料"></a>6.1 获取参考资料</h2><h3 id="6-1-1-ES部署参考资料"><a href="#6-1-1-ES部署参考资料" class="headerlink" title="6.1.1 ES部署参考资料"></a>6.1.1 ES部署参考资料</h3><p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212211742909.png" alt="image-20220212211742909"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212211840530.png" alt="image-20220212211840530"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212211857732.png" alt="image-20220212211857732"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212211950202.png" alt="image-20220212211950202"></p>
<h3 id="6-1-2-Kibana部署参考资料"><a href="#6-1-2-Kibana部署参考资料" class="headerlink" title="6.1.2 Kibana部署参考资料"></a>6.1.2 Kibana部署参考资料</h3><p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212212223735.png" alt="image-20220212212223735"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212212245791.png" alt="image-20220212212245791"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212212305429.png" alt="image-20220212212305429"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212212341841.png" alt="image-20220212212341841"></p>
<h2 id="6-2-ES部署"><a href="#6-2-ES部署" class="headerlink" title="6.2 ES部署"></a>6.2 ES部署</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker pull elasticsearch:7.17.0</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkdir -p /opt/es/config</span></span><br><span class="line"><span class="comment"># mkdir -p /opt/es/data</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># echo &quot;http.host: 0.0.0.0&quot; &gt;&gt; /opt/es/config/elasticsearch.yml</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># chmod -R 777 /opt/es/</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run --name elasticsearch -p 9200:9200 -p 9300:9300 \</span></span><br><span class="line"><span class="literal">-e</span> <span class="string">&quot;discovery.type=single-node&quot;</span> \</span><br><span class="line"><span class="literal">-e</span> ES_JAVA_OPTS=<span class="string">&quot;-Xms64m -Xmx512m&quot;</span> \</span><br><span class="line"><span class="literal">-v</span> /opt/es/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml \</span><br><span class="line"><span class="literal">-v</span> /opt/es/<span class="keyword">data</span>:/usr/share/elasticsearch/<span class="keyword">data</span> \</span><br><span class="line"><span class="literal">-v</span> /opt/es/plugins:/usr/share/elasticsearch/plugins \</span><br><span class="line"><span class="literal">-d</span> elasticsearch:<span class="number">7.17</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS                                                                                  NAMES</span><br><span class="line">e1c306e6e5a3   elasticsearch:<span class="number">7.17</span>.<span class="number">0</span>   <span class="string">&quot;/bin/tini -- /usr/l…&quot;</span>   <span class="number">22</span> seconds ago   Up <span class="number">20</span> seconds   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">9200</span>-&gt;<span class="number">9200</span>/tcp, :::<span class="number">9200</span>-&gt;<span class="number">9200</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">9300</span>-&gt;<span class="number">9300</span>/tcp, :::<span class="number">9300</span>-&gt;<span class="number">9300</span>/tcp   elasticsearch</span><br></pre></td></tr></table></figure>



<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212224446838.png" alt="image-20220212224446838"></p>
<h2 id="6-3-Kibana部署"><a href="#6-3-Kibana部署" class="headerlink" title="6.3 Kibana部署"></a>6.3 Kibana部署</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker pull kibana:7.17.0</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run --name kibana -e ELASTICSEARCH_HOSTS=http://192.168.255.157:9200 -p 5601:5601 \</span></span><br><span class="line"><span class="literal">-d</span> kibana:<span class="number">7.17</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE                  COMMAND                  CREATED         STATUS         PORTS                                                                                  NAMES</span><br><span class="line">fb60e73f9cd5   kibana:<span class="number">7.17</span>.<span class="number">0</span>          <span class="string">&quot;/bin/tini -- /usr/l…&quot;</span>   <span class="number">2</span> minutes ago   Up <span class="number">2</span> minutes   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">5601</span>-&gt;<span class="number">5601</span>/tcp, :::<span class="number">5601</span>-&gt;<span class="number">5601</span>/tcp                                              kibana</span><br></pre></td></tr></table></figure>



<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212224524598.png" alt="image-20220212224524598"></p>
<h1 id="七、使用Docker容器实现Redis部署"><a href="#七、使用Docker容器实现Redis部署" class="headerlink" title="七、使用Docker容器实现Redis部署"></a>七、使用Docker容器实现Redis部署</h1><h2 id="7-1-获取参考资料"><a href="#7-1-获取参考资料" class="headerlink" title="7.1 获取参考资料"></a>7.1 获取参考资料</h2><p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212225251173.png" alt="image-20220212225251173"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212225313006.png" alt="image-20220212225313006"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212225336437.png" alt="image-20220212225336437"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220212225412367.png" alt="image-20220212225412367"></p>
<h2 id="7-2-运行Redis容器"><a href="#7-2-运行Redis容器" class="headerlink" title="7.2 运行Redis容器"></a>7.2 运行Redis容器</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkdir -p /opt/redis/conf</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># touch /opt/redis/conf/redis.conf</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -p 6379:6379 --name redis -v /opt/redis/data:/data \</span></span><br><span class="line"><span class="literal">-v</span> /opt/redis/conf:/etc/redis \</span><br><span class="line"><span class="literal">-d</span> redis redis<span class="literal">-server</span> /etc/redis/redis.conf</span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE                  COMMAND                  CREATED          STATUS          PORTS                                                                                  NAMES</span><br><span class="line"><span class="number">9</span>bd2b39cd92a   redis                  <span class="string">&quot;docker-entrypoint.s…&quot;</span>   <span class="number">44</span> seconds ago   Up <span class="number">42</span> seconds   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">6379</span>-&gt;<span class="number">6379</span>/tcp, :::<span class="number">6379</span>-&gt;<span class="number">6379</span>/tcp                                              redis</span><br></pre></td></tr></table></figure>



<h2 id="7-3-验证"><a href="#7-3-验证" class="headerlink" title="7.3 验证"></a>7.3 验证</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum -y install redis</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redis-cli -h 192.168.255.157 -p 6379</span></span><br><span class="line"></span><br><span class="line"><span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> test1 a</span><br><span class="line">OK</span><br><span class="line"><span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">6379</span>&gt; get test1</span><br><span class="line"><span class="string">&quot;a&quot;</span></span><br></pre></td></tr></table></figure>



<h2 id="7-4-Redis集群"><a href="#7-4-Redis集群" class="headerlink" title="7.4 Redis集群"></a>7.4 Redis集群</h2><p>安装redis-cluster；3主3从方式，从为了同步备份，主进行slot数据分片</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">编辑运行多个redis容器脚本文件</span><br><span class="line"><span class="comment"># vim redis-cluster.sh</span></span><br><span class="line"><span class="comment"># cat redis-cluster.sh</span></span><br><span class="line"><span class="keyword">for</span> port <span class="keyword">in</span> <span class="variable">$</span>(seq <span class="number">8001</span> <span class="number">8006</span>); \</span><br><span class="line"><span class="keyword">do</span> \</span><br><span class="line">mkdir <span class="literal">-p</span> /mydata/redis/node-<span class="variable">$</span>&#123;port&#125;/conf</span><br><span class="line">touch /mydata/redis/node-<span class="variable">$</span>&#123;port&#125;/conf/redis.conf</span><br><span class="line"><span class="built_in">cat</span> &lt;&lt; EOF &gt;/mydata/redis/node-<span class="variable">$</span>&#123;port&#125;/conf/redis.conf</span><br><span class="line">port <span class="variable">$</span>&#123;port&#125;</span><br><span class="line">cluster<span class="literal">-enabled</span> yes</span><br><span class="line">cluster<span class="literal">-config</span><span class="operator">-file</span> nodes.conf</span><br><span class="line">cluster<span class="literal">-node</span><span class="literal">-timeout</span> <span class="number">5000</span></span><br><span class="line">cluster<span class="literal">-announce</span><span class="literal">-ip</span> <span class="number">192.168</span>.<span class="number">255.157</span></span><br><span class="line">cluster<span class="literal">-announce</span><span class="literal">-port</span> <span class="variable">$</span>&#123;port&#125;</span><br><span class="line">cluster<span class="literal">-announce</span><span class="literal">-bus</span><span class="literal">-port</span> <span class="number">1</span><span class="variable">$</span>&#123;port&#125;</span><br><span class="line">appendonly yes</span><br><span class="line">EOF</span><br><span class="line">docker run <span class="literal">-p</span> <span class="variable">$</span>&#123;port&#125;:<span class="variable">$</span>&#123;port&#125; <span class="literal">-p</span> <span class="number">1</span><span class="variable">$</span>&#123;port&#125;:<span class="number">1</span><span class="variable">$</span>&#123;port&#125; -<span class="literal">-name</span> redis-<span class="variable">$</span>&#123;port&#125; \</span><br><span class="line"><span class="literal">-v</span> /mydata/redis/node-<span class="variable">$</span>&#123;port&#125;/<span class="keyword">data</span>:/<span class="keyword">data</span> \</span><br><span class="line"><span class="literal">-v</span> /mydata/redis/node-<span class="variable">$</span>&#123;port&#125;/conf/redis.conf:/etc/redis/redis.conf \</span><br><span class="line"><span class="literal">-d</span> redis:<span class="number">5.0</span>.<span class="number">7</span> redis<span class="literal">-server</span> /etc/redis/redis.conf; \</span><br><span class="line">done</span><br></pre></td></tr></table></figure>





<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">执行脚本</span><br><span class="line"><span class="comment"># sh redis-cluster.sh</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">查看已运行容器</span><br><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE         COMMAND                  CREATED              STATUS              PORTS                                                                                                NAMES</span><br><span class="line"><span class="number">8</span>d53864a98ce   redis:<span class="number">5.0</span>.<span class="number">7</span>   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   About a minute ago   Up About a minute   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8006</span>-&gt;<span class="number">8006</span>/tcp, :::<span class="number">8006</span>-&gt;<span class="number">8006</span>/tcp, <span class="number">6379</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">18006</span>-&gt;<span class="number">18006</span>/tcp, :::<span class="number">18006</span>-&gt;<span class="number">18006</span>/tcp   redis<span class="literal">-8006</span></span><br><span class="line">e2b5da0f0605   redis:<span class="number">5.0</span>.<span class="number">7</span>   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   <span class="number">2</span> minutes ago        Up About a minute   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8005</span>-&gt;<span class="number">8005</span>/tcp, :::<span class="number">8005</span>-&gt;<span class="number">8005</span>/tcp, <span class="number">6379</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">18005</span>-&gt;<span class="number">18005</span>/tcp, :::<span class="number">18005</span>-&gt;<span class="number">18005</span>/tcp   redis<span class="literal">-8005</span></span><br><span class="line"><span class="number">70</span>e8e8f15aea   redis:<span class="number">5.0</span>.<span class="number">7</span>   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   <span class="number">2</span> minutes ago        Up <span class="number">2</span> minutes        <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8004</span>-&gt;<span class="number">8004</span>/tcp, :::<span class="number">8004</span>-&gt;<span class="number">8004</span>/tcp, <span class="number">6379</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">18004</span>-&gt;<span class="number">18004</span>/tcp, :::<span class="number">18004</span>-&gt;<span class="number">18004</span>/tcp   redis<span class="literal">-8004</span></span><br><span class="line">dff8e4bf02b4   redis:<span class="number">5.0</span>.<span class="number">7</span>   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   <span class="number">2</span> minutes ago        Up <span class="number">2</span> minutes        <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8003</span>-&gt;<span class="number">8003</span>/tcp, :::<span class="number">8003</span>-&gt;<span class="number">8003</span>/tcp, <span class="number">6379</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">18003</span>-&gt;<span class="number">18003</span>/tcp, :::<span class="number">18003</span>-&gt;<span class="number">18003</span>/tcp   redis<span class="literal">-8003</span></span><br><span class="line">c34dc4c423ef   redis:<span class="number">5.0</span>.<span class="number">7</span>   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   <span class="number">2</span> minutes ago        Up <span class="number">2</span> minutes        <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8002</span>-&gt;<span class="number">8002</span>/tcp, :::<span class="number">8002</span>-&gt;<span class="number">8002</span>/tcp, <span class="number">6379</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">18002</span>-&gt;<span class="number">18002</span>/tcp, :::<span class="number">18002</span>-&gt;<span class="number">18002</span>/tcp   redis<span class="literal">-8002</span></span><br><span class="line">b8cb5feffb43   redis:<span class="number">5.0</span>.<span class="number">7</span>   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   <span class="number">2</span> minutes ago        Up <span class="number">2</span> minutes        <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8001</span>-&gt;<span class="number">8001</span>/tcp, :::<span class="number">8001</span>-&gt;<span class="number">8001</span>/tcp, <span class="number">6379</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">18001</span>-&gt;<span class="number">18001</span>/tcp, :::<span class="number">18001</span>-&gt;<span class="number">18001</span>/tcp   redis<span class="literal">-8001</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">登录redis容器</span><br><span class="line"><span class="comment"># docker exec -it redis-8001 bash</span></span><br><span class="line">root@b8cb5feffb43:/<span class="keyword">data</span><span class="comment">#</span></span><br></pre></td></tr></table></figure>





<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">创建redis<span class="literal">-cluster</span></span><br><span class="line">root@b8cb5feffb43:/<span class="keyword">data</span><span class="comment"># redis-cli --cluster create 192.168.255.157:8001 192.168.255.157:8002 192.168.255.157:8003 192.168.255.157:8004 192.168.255.157:8005 192.168.255.157:8006 --cluster-replicas 1</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">输出：</span><br><span class="line">&gt;&gt;&gt; Performing hash slots allocation on <span class="number">6</span> nodes...</span><br><span class="line">Master[<span class="number">0</span>] -&gt; Slots <span class="number">0</span> - <span class="number">5460</span></span><br><span class="line">Master[<span class="number">1</span>] -&gt; Slots <span class="number">5461</span> - <span class="number">10922</span></span><br><span class="line">Master[<span class="number">2</span>] -&gt; Slots <span class="number">10923</span> - <span class="number">16383</span></span><br><span class="line">Adding replica <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8005</span> to <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8001</span></span><br><span class="line">Adding replica <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8006</span> to <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8002</span></span><br><span class="line">Adding replica <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8004</span> to <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8003</span></span><br><span class="line">&gt;&gt;&gt; Trying to optimize slaves allocation <span class="keyword">for</span> anti<span class="literal">-affinity</span></span><br><span class="line">[<span class="type">WARNING</span>] Some slaves are <span class="keyword">in</span> the same host as their master</span><br><span class="line">M: abd07f1a2679fe77558bad3ff4b7ab70ec41efa5 <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8001</span></span><br><span class="line">   slots:[<span class="number">0</span>-<span class="number">5460</span>] (<span class="number">5461</span> slots) master</span><br><span class="line">M: <span class="number">40</span>e69202bb3eab13a8157c33da6240bb31f2fd6f <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8002</span></span><br><span class="line">   slots:[<span class="number">5461</span>-<span class="number">10922</span>] (<span class="number">5462</span> slots) master</span><br><span class="line">M: <span class="number">9</span>a927abf3c2982ba9ffdb29176fc8ffa77a2cf03 <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8003</span></span><br><span class="line">   slots:[<span class="number">10923</span>-<span class="number">16383</span>] (<span class="number">5461</span> slots) master</span><br><span class="line">S: <span class="number">81</span>d0a4056328830a555fcd75cf523d4c9d52205c <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8004</span></span><br><span class="line">   replicates <span class="number">9</span>a927abf3c2982ba9ffdb29176fc8ffa77a2cf03</span><br><span class="line">S: <span class="number">8121</span>a28519e5b52e4817913aa3969d9431bb68af <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8005</span></span><br><span class="line">   replicates abd07f1a2679fe77558bad3ff4b7ab70ec41efa5</span><br><span class="line">S: <span class="number">3</span>a8dd5343c0b8f5580bc44f6b3bb5b4371d4dde5 <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8006</span></span><br><span class="line">   replicates <span class="number">40</span>e69202bb3eab13a8157c33da6240bb31f2fd6f</span><br><span class="line">Can I <span class="built_in">set</span> the above configuration? (<span class="built_in">type</span> <span class="string">&#x27;yes&#x27;</span> to accept): yes 输入yes</span><br><span class="line">&gt;&gt;&gt; Nodes configuration updated</span><br><span class="line">&gt;&gt;&gt; Assign a different config epoch to each node</span><br><span class="line">&gt;&gt;&gt; Sending CLUSTER MEET messages to join the cluster</span><br><span class="line">Waiting <span class="keyword">for</span> the cluster to join</span><br><span class="line">.....</span><br><span class="line">&gt;&gt;&gt; Performing Cluster Check (<span class="keyword">using</span> node 192.168.255.157:8001)</span><br><span class="line">M: abd07f1a2679fe77558bad3ff4b7ab70ec41efa5 <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8001</span></span><br><span class="line">   slots:[<span class="number">0</span>-<span class="number">5460</span>] (<span class="number">5461</span> slots) master</span><br><span class="line">   <span class="number">1</span> additional replica(s)</span><br><span class="line">S: <span class="number">81</span>d0a4056328830a555fcd75cf523d4c9d52205c <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8004</span></span><br><span class="line">   slots: (<span class="number">0</span> slots) slave</span><br><span class="line">   replicates <span class="number">9</span>a927abf3c2982ba9ffdb29176fc8ffa77a2cf03</span><br><span class="line">M: <span class="number">40</span>e69202bb3eab13a8157c33da6240bb31f2fd6f <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8002</span></span><br><span class="line">   slots:[<span class="number">5461</span>-<span class="number">10922</span>] (<span class="number">5462</span> slots) master</span><br><span class="line">   <span class="number">1</span> additional replica(s)</span><br><span class="line">S: <span class="number">8121</span>a28519e5b52e4817913aa3969d9431bb68af <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8005</span></span><br><span class="line">   slots: (<span class="number">0</span> slots) slave</span><br><span class="line">   replicates abd07f1a2679fe77558bad3ff4b7ab70ec41efa5</span><br><span class="line">M: <span class="number">9</span>a927abf3c2982ba9ffdb29176fc8ffa77a2cf03 <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8003</span></span><br><span class="line">   slots:[<span class="number">10923</span>-<span class="number">16383</span>] (<span class="number">5461</span> slots) master</span><br><span class="line">   <span class="number">1</span> additional replica(s)</span><br><span class="line">S: <span class="number">3</span>a8dd5343c0b8f5580bc44f6b3bb5b4371d4dde5 <span class="number">192.168</span>.<span class="number">255.157</span>:<span class="number">8006</span></span><br><span class="line">   slots: (<span class="number">0</span> slots) slave</span><br><span class="line">   replicates <span class="number">40</span>e69202bb3eab13a8157c33da6240bb31f2fd6f</span><br><span class="line">[<span class="type">OK</span>] All nodes agree about slots configuration.</span><br><span class="line">&gt;&gt;&gt; Check <span class="keyword">for</span> open slots...</span><br><span class="line">&gt;&gt;&gt; Check slots coverage...</span><br><span class="line">[<span class="type">OK</span>] All <span class="number">16384</span> slots covered.</span><br></pre></td></tr></table></figure>





<h1 id="八、使用Docker容器实现RabbitMQ部署"><a href="#八、使用Docker容器实现RabbitMQ部署" class="headerlink" title="八、使用Docker容器实现RabbitMQ部署"></a>八、使用Docker容器实现RabbitMQ部署</h1><h2 id="8-1-获取参考资料"><a href="#8-1-获取参考资料" class="headerlink" title="8.1 获取参考资料"></a>8.1 获取参考资料</h2><p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213123228483.png" alt="image-20220213123228483"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213123307806.png" alt="image-20220213123307806"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213123355531.png" alt="image-20220213123355531"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213123503083.png" alt="image-20220213123503083"></p>
<h2 id="8-2-部署RabbitMQ"><a href="#8-2-部署RabbitMQ" class="headerlink" title="8.2 部署RabbitMQ"></a>8.2 部署RabbitMQ</h2><blockquote>
<p>部署带管理控制台的RabbitMQ</p>
</blockquote>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -d --name rabbitmq -p 5671:5671 -p 5672:5672 -p 4369:4369 -p 25672:25672 -p 15671:15671 -p 15672:15672 -v /opt/rabbitmq:/var/lib/rabbitmq rabbitmq:management</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS         PORTS                                                                                                                                                                                                                                             NAMES</span><br><span class="line"><span class="number">97</span>d28093faa4   rabbitmq:management   <span class="string">&quot;docker-entrypoint.s…&quot;</span>   <span class="number">11</span> seconds ago   Up <span class="number">6</span> seconds   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">4369</span>-&gt;<span class="number">4369</span>/tcp, :::<span class="number">4369</span>-&gt;<span class="number">4369</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">5671</span><span class="literal">-5672</span>-&gt;<span class="number">5671</span><span class="literal">-5672</span>/tcp, :::<span class="number">5671</span><span class="literal">-5672</span>-&gt;<span class="number">5671</span><span class="literal">-5672</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">15671</span><span class="literal">-15672</span>-&gt;<span class="number">15671</span><span class="literal">-15672</span>/tcp, :::<span class="number">15671</span><span class="literal">-15672</span>-&gt;<span class="number">15671</span><span class="literal">-15672</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">25672</span>-&gt;<span class="number">25672</span>/tcp, :::<span class="number">25672</span>-&gt;<span class="number">25672</span>/tcp, <span class="number">15691</span><span class="literal">-15692</span>/tcp   rabbitmq</span><br></pre></td></tr></table></figure>





<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">端口说明：</span><br><span class="line"><span class="number">4369</span>, <span class="number">25672</span> (Erlang发现&amp;集群端口)</span><br><span class="line"><span class="number">5672</span>, <span class="number">5671</span> (AMQP端口)</span><br><span class="line"><span class="number">15672</span> (web管理后台端口)</span><br><span class="line"><span class="number">61613</span>, <span class="number">61614</span> (STOMP协议端口)</span><br><span class="line"><span class="number">1883</span>, <span class="number">8883</span> (MQTT协议端口)</span><br></pre></td></tr></table></figure>



<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213124157710.png" alt="image-20220213124157710"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213124232819.png" alt="image-20220213124232819"></p>
<p><img src="/images/Docker/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4.assets/image-20220213124302137.png" alt="image-20220213124302137"></p>

  </div>
</article>





    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>  
    <div id="vcomments" class="blog-post-comments"></div>
    <script>        
        new Valine({
            el: '#vcomments',
            visitor: true,
            appId: 'gqmHGHyrnzRPUSxqADLhUzlT-gzGzoHsz',
            appKey: 'q8uQ7rKeukTuQ3L35peaOhkC',
            placeholder: '好哥哥，说几句吧！',
            avatar: 'retro'
        })
    </script>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">一、Docker部署应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E5%BF%85%E8%A6%81%E6%80%A7"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 使用Docker部署应用必要性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 使用Docker部署应用参考资料</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0Nginx%E9%83%A8%E7%BD%B2"><span class="toc-number">2.</span> <span class="toc-text">二、使用Docker容器实现Nginx部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E8%8E%B7%E5%8F%96%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 获取参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E8%BF%90%E8%A1%8CNginx%E5%BA%94%E7%94%A8%E5%AE%B9%E5%99%A8"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 运行Nginx应用容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E8%BF%90%E8%A1%8CNginx%E5%BA%94%E7%94%A8%E5%AE%B9%E5%99%A8"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 运行Nginx应用容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E8%BF%90%E8%A1%8CNginx%E5%BA%94%E7%94%A8%E5%AE%B9%E5%99%A8"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 运行Nginx应用容器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0Tomcat%E9%83%A8%E7%BD%B2"><span class="toc-number">3.</span> <span class="toc-text">三、使用Docker容器实现Tomcat部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E8%8E%B7%E5%8F%96%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 获取参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E8%BF%90%E8%A1%8Ctomcat%E5%BA%94%E7%94%A8%E5%AE%B9%E5%99%A8"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 运行tomcat应用容器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-%E4%B8%8D%E6%9A%B4%E9%9C%B2%E7%AB%AF%E5%8F%A3%E8%BF%90%E8%A1%8C"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1 不暴露端口运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-%E6%9A%B4%E9%9C%B2%E7%AB%AF%E5%8F%A3%E8%BF%90%E8%A1%8C"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2 暴露端口运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-%E6%9A%B4%E9%9C%B2%E7%AB%AF%E5%8F%A3%E5%8F%8A%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%AB%99%E6%96%87%E4%BB%B6"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3 暴露端口及添加网站文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0MySQL%E9%83%A8%E7%BD%B2"><span class="toc-number">4.</span> <span class="toc-text">四、使用Docker容器实现MySQL部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E5%8D%95%E8%8A%82%E7%82%B9MySQL%E9%83%A8%E7%BD%B2"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 单节点MySQL部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-MySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 MySQL主从复制集群部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-MySQL%E4%B8%BB%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.2.1 MySQL主节点部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-MySQL%E4%B8%BB%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.2.</span> <span class="toc-text">4.2.2 MySQL主节点配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-MySQL%E4%BB%8E%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2"><span class="toc-number">4.2.3.</span> <span class="toc-text">4.2.3 MySQL从节点部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4-MySQL%E4%BB%8E%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.4.</span> <span class="toc-text">4.2.4 MySQL从节点配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-5-master%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.5.</span> <span class="toc-text">4.2.5 master节点配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-6-slave%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.6.</span> <span class="toc-text">4.2.6 slave节点配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-7-%E9%AA%8C%E8%AF%81MySQL%E9%9B%86%E7%BE%A4%E5%8F%AF%E7%94%A8%E6%80%A7"><span class="toc-number">4.2.7.</span> <span class="toc-text">4.2.7 验证MySQL集群可用性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0Oracle%E9%83%A8%E7%BD%B2"><span class="toc-number">5.</span> <span class="toc-text">五、使用Docker容器实现Oracle部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E8%8E%B7%E5%8F%96%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 获取参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E8%BF%90%E8%A1%8Coracle%E5%AE%B9%E5%99%A8"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 运行oracle容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E4%B8%8B%E8%BD%BD%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5%E5%B7%A5%E5%85%B7"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 下载客户端连接工具</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0ElasticSearch-Kibana%E9%83%A8%E7%BD%B2"><span class="toc-number">6.</span> <span class="toc-text">六、使用Docker容器实现ElasticSearch+Kibana部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E8%8E%B7%E5%8F%96%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 获取参考资料</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-ES%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">6.1.1.</span> <span class="toc-text">6.1.1 ES部署参考资料</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2-Kibana%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">6.1.2.</span> <span class="toc-text">6.1.2 Kibana部署参考资料</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-ES%E9%83%A8%E7%BD%B2"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 ES部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-Kibana%E9%83%A8%E7%BD%B2"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 Kibana部署</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0Redis%E9%83%A8%E7%BD%B2"><span class="toc-number">7.</span> <span class="toc-text">七、使用Docker容器实现Redis部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E8%8E%B7%E5%8F%96%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 获取参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E8%BF%90%E8%A1%8CRedis%E5%AE%B9%E5%99%A8"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 运行Redis容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E9%AA%8C%E8%AF%81"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 验证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-Redis%E9%9B%86%E7%BE%A4"><span class="toc-number">7.4.</span> <span class="toc-text">7.4 Redis集群</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E4%BD%BF%E7%94%A8Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0RabbitMQ%E9%83%A8%E7%BD%B2"><span class="toc-number">8.</span> <span class="toc-text">八、使用Docker容器实现RabbitMQ部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E8%8E%B7%E5%8F%96%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 获取参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E9%83%A8%E7%BD%B2RabbitMQ"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 部署RabbitMQ</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&text=Docker部署应用集群"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&title=Docker部署应用集群"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&is_video=false&description=Docker部署应用集群"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Docker部署应用集群&body=Check out this article: https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&title=Docker部署应用集群"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&title=Docker部署应用集群"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&title=Docker部署应用集群"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&title=Docker部署应用集群"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://fate-re-zero.github.io/2023/08/01/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/Docker%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E9%9B%86%E7%BE%A4/&name=Docker部署应用集群&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn">2025 祥祥要起飞</a>
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
</body>
</html>
<!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


<!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>


<script src="/lib/particles/particles.min.js"></script>


<script src="/lib/typing/typing.min.js"></script>


<script src="/js/main.js"></script>


<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


